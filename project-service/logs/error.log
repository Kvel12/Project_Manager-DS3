{"environment":"development","level":"error","message":"Circuit payment-service failure: Project validation failed","service":"project-service","stack":"Error: Project validation failed\n    at /usr/src/app/src/sagas/projectSaga.js:54:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async CircuitBreaker.execute (/usr/src/app/src/utils/circuitBreaker.js:37:22)\n    at async ProjectSaga.createProject (/usr/src/app/src/sagas/projectSaga.js:36:25)\n    at async createProject (/usr/src/app/src/controllers/projectController.js:24:22)","timestamp":"2024-11-15T05:49:37.360Z"}
{"environment":"development","level":"error","message":"Project creation saga failed: create-project-1731649777121 PAYMENT_CREATION_FAILED","originalError":{},"service":"project-service","stack":"Error: PAYMENT_CREATION_FAILED\n    at ProjectSaga.createProject (/usr/src/app/src/sagas/projectSaga.js:77:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async createProject (/usr/src/app/src/controllers/projectController.js:24:22)","timestamp":"2024-11-15T05:49:37.362Z"}
{"environment":"development","level":"error","message":"Saga failed: create-project-1731649777121","service":"project-service","timestamp":"2024-11-15T05:49:37.363Z"}
{"environment":"development","level":"error","message":"Unhandled Rejection at:","service":"project-service","timestamp":"2024-11-15T05:49:37.383Z"}
{"environment":"development","level":"error","message":"Error updating project payment status: invalid input value for enum \"enum_Projects_paymentStatus\": \"paid\"","name":"SequelizeDatabaseError","original":{"code":"22P02","file":"enum.c","length":116,"line":"129","name":"error","parameters":["paid","2024-11-15 06:06:24.104 +00:00",12],"routine":"enum_in","severity":"ERROR","sql":"UPDATE \"Projects\" SET \"paymentStatus\"=$1,\"updatedAt\"=$2 WHERE \"id\" = $3"},"parameters":["paid","2024-11-15 06:06:24.104 +00:00",12],"parent":{"code":"22P02","file":"enum.c","length":116,"line":"129","name":"error","parameters":["paid","2024-11-15 06:06:24.104 +00:00",12],"routine":"enum_in","severity":"ERROR","sql":"UPDATE \"Projects\" SET \"paymentStatus\"=$1,\"updatedAt\"=$2 WHERE \"id\" = $3"},"service":"project-service","sql":"UPDATE \"Projects\" SET \"paymentStatus\"=$1,\"updatedAt\"=$2 WHERE \"id\" = $3","stack":"Error\n    at Query.run (/usr/src/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /usr/src/app/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PostgresQueryInterface.update (/usr/src/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:355:12)\n    at async model.save (/usr/src/app/node_modules/sequelize/lib/model.js:2490:35)\n    at async model.update (/usr/src/app/node_modules/sequelize/lib/model.js:2598:12)\n    at async /usr/src/app/src/routes/validationRoutes.js:87:7","timestamp":"2024-11-15T06:06:24.113Z"}
{"environment":"development","level":"error","message":"Unhandled Rejection at:","service":"project-service","timestamp":"2024-11-15T06:06:24.115Z"}
{"environment":"development","level":"error","message":"Circuit payment-service failure: Operation timed out for circuit payment-service","service":"project-service","stack":"Error: Operation timed out for circuit payment-service\n    at Timeout._onTimeout (/usr/src/app/src/utils/circuitBreaker.js:33:18)\n    at listOnTimeout (node:internal/timers:569:17)\n    at process.processTimers (node:internal/timers:512:7)","timestamp":"2024-11-15T06:06:27.862Z"}
{"environment":"development","level":"error","message":"Project creation saga failed: create-project-1731650782807 PAYMENT_CREATION_FAILED","originalError":{},"service":"project-service","stack":"Error: PAYMENT_CREATION_FAILED\n    at ProjectSaga.createProject (/usr/src/app/src/sagas/projectSaga.js:77:27)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at process.processTimers (node:internal/timers:509:9)\n    at async createProject (/usr/src/app/src/controllers/projectController.js:24:22)","timestamp":"2024-11-15T06:06:27.863Z"}
{"environment":"development","level":"error","message":"Saga failed: create-project-1731650782807","service":"project-service","timestamp":"2024-11-15T06:06:27.866Z"}
{"environment":"development","level":"error","message":"Unhandled Rejection at:","service":"project-service","timestamp":"2024-11-15T06:06:27.876Z"}
{"environment":"development","level":"error","message":"Circuit payment-service failure: projectServiceBreaker is not defined","service":"project-service","stack":"Error: projectServiceBreaker is not defined\n    at /usr/src/app/src/sagas/projectSaga.js:54:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async CircuitBreaker.execute (/usr/src/app/src/utils/circuitBreaker.js:37:22)\n    at async ProjectSaga.createProject (/usr/src/app/src/sagas/projectSaga.js:36:25)\n    at async createProject (/usr/src/app/src/controllers/projectController.js:25:22)","timestamp":"2024-11-15T06:27:27.871Z"}
{"environment":"development","level":"error","message":"Project creation saga failed: create-project-1731652047378 PAYMENT_CREATION_FAILED","originalError":{},"service":"project-service","stack":"Error: PAYMENT_CREATION_FAILED\n    at ProjectSaga.createProject (/usr/src/app/src/sagas/projectSaga.js:77:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async createProject (/usr/src/app/src/controllers/projectController.js:25:22)","timestamp":"2024-11-15T06:27:27.873Z"}
{"environment":"development","level":"error","message":"Saga failed: create-project-1731652047378","service":"project-service","timestamp":"2024-11-15T06:27:27.875Z"}
{"environment":"development","level":"error","message":"Unhandled Rejection at:","service":"project-service","timestamp":"2024-11-15T06:27:27.947Z"}
{"body":"{\n    \"title\": \"Test Project Failure\",\n    \"description\": \"Project for testing SAGA pattern - Failure Case\",\n    \"priority\": \"high\",\n    \"budget\": -1  # Esto causar� un error de validaci�n\n  }","environment":"development","expose":true,"level":"error","message":"Unhandled error: Unexpected token # in JSON at position 151","service":"project-service","stack":"SyntaxError: Unexpected token # in JSON at position 151\n    at JSON.parse (<anonymous>)\n    at parse (/usr/src/app/node_modules/body-parser/lib/types/json.js:92:19)\n    at /usr/src/app/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:203:9)\n    at invokeCallback (/usr/src/app/node_modules/raw-body/index.js:238:16)\n    at done (/usr/src/app/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/usr/src/app/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:517:28)\n    at endReadableNT (node:internal/streams/readable:1400:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)","status":400,"statusCode":400,"timestamp":"2024-11-15T06:44:22.968Z","type":"entity.parse.failed"}
{"body":"{\n    \"title\": \"Test Project Failure\",\n    \"description\": \"Project for testing SAGA pattern - Failure Case\",\n    \"priority\": \"high\",\n    \"budget\": -1  # Esto causar� un error de validaci�n\n  }","environment":"development","expose":true,"level":"error","message":"Unhandled error: Unexpected token # in JSON at position 151","service":"project-service","stack":"SyntaxError: Unexpected token # in JSON at position 151\n    at JSON.parse (<anonymous>)\n    at parse (/usr/src/app/node_modules/body-parser/lib/types/json.js:92:19)\n    at /usr/src/app/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:203:9)\n    at invokeCallback (/usr/src/app/node_modules/raw-body/index.js:238:16)\n    at done (/usr/src/app/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/usr/src/app/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:517:28)\n    at endReadableNT (node:internal/streams/readable:1400:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)","status":400,"statusCode":400,"timestamp":"2024-11-15T06:44:46.006Z","type":"entity.parse.failed"}
{"body":"{\n    \"title\": \"Test Project Failure\",\n    \"description\": \"Project for testing SAGA pattern - Failure Case\",\n    \"priority\": \"high\",\n    \"budget\": -1  # Esto causar� un error de validaci�n\n  }","environment":"development","expose":true,"level":"error","message":"Unhandled error: Unexpected token # in JSON at position 151","service":"project-service","stack":"SyntaxError: Unexpected token # in JSON at position 151\n    at JSON.parse (<anonymous>)\n    at parse (/usr/src/app/node_modules/body-parser/lib/types/json.js:92:19)\n    at /usr/src/app/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:203:9)\n    at invokeCallback (/usr/src/app/node_modules/raw-body/index.js:238:16)\n    at done (/usr/src/app/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/usr/src/app/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:517:28)\n    at endReadableNT (node:internal/streams/readable:1400:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)","status":400,"statusCode":400,"timestamp":"2024-11-15T06:45:26.262Z","type":"entity.parse.failed"}
{"environment":"development","errors":[{"instance":{"budget":-1,"createdAt":"2024-11-15T06:45:45.928Z","description":"Project for testing SAGA pattern - Failure Case","id":null,"metadata":{},"paymentStatus":"pending","priority":"high","startDate":"2024-11-15T06:45:45.928Z","status":"draft","title":"Test Project Failure","updatedAt":"2024-11-15T06:45:45.928Z","userId":1},"message":"Validation min on budget failed","origin":"FUNCTION","original":{"validatorArgs":[0],"validatorName":"min"},"path":"budget","type":"Validation error","validatorArgs":[0],"validatorKey":"min","validatorName":"min","value":-1}],"level":"error","message":"Project creation saga failed: create-project-1731653145927 Validation error: Validation min on budget failed","name":"SequelizeValidationError","service":"project-service","stack":"SequelizeValidationError: Validation error: Validation min on budget failed\n    at InstanceValidator._validate (/usr/src/app/node_modules/sequelize/lib/instance-validator.js:50:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async InstanceValidator._validateAndRunHooks (/usr/src/app/node_modules/sequelize/lib/instance-validator.js:60:7)\n    at async InstanceValidator.validate (/usr/src/app/node_modules/sequelize/lib/instance-validator.js:54:12)\n    at async model.save (/usr/src/app/node_modules/sequelize/lib/model.js:2426:7)\n    at async Project.create (/usr/src/app/node_modules/sequelize/lib/model.js:1362:12)\n    at async ProjectSaga.createProject (/usr/src/app/src/sagas/projectSaga.js:26:17)\n    at async createProject (/usr/src/app/src/controllers/projectController.js:25:22)","timestamp":"2024-11-15T06:45:45.932Z"}
{"environment":"development","level":"error","message":"Saga failed: create-project-1731653145927","service":"project-service","timestamp":"2024-11-15T06:45:45.934Z"}
{"environment":"development","level":"error","message":"Unhandled Rejection at:","service":"project-service","timestamp":"2024-11-15T06:45:45.937Z"}
